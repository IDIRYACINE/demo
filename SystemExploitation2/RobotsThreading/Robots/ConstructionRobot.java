package Robots;

import Monitors.IRobotsMonitor;

public class ConstructionRobot extends Thread {
    private static IRobotsMonitor monitor ;
    private int pieceType;
    private int numberOfProjectedProduction ;
    private String ROBOT_NAME;

    public ConstructionRobot(IRobotsMonitor threadMonitor , int piece , String robotName , int numberOfPieces) {
        monitor = threadMonitor;
        pieceType = piece;
        ROBOT_NAME = robotName;
        numberOfProjectedProduction = numberOfPieces;
    }

    @Override
    public void run() {
        int producedPieces = 0 ;
        while(producedPieces<numberOfProjectedProduction){
            monitor.acquireMutexPermission();
            monitor.stockNewPiece(pieceType);
            producedPieces++;
            System.out.println("Robot "+ ROBOT_NAME + " Produced "+ PiecesRegistre.getPieceName(pieceType) + ": " + producedPieces);
            if(monitor.isAwaitingPiece(pieceType)){
                monitor.notifyPieceProduction(pieceType);
            }
            monitor.releaseMutexPermission();}
    }

}
